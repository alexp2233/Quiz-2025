<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Security-Test</title>

<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    background: var(--bg);
    color: var(--text);
    display: flex;
    justify-content: center;
  }

  :root {
    --highlight-border: #cc0000;
    --highlight-bg: #ffe6e6;	
    --bg: #fafafa;
    --text: #000;
    --box-bg: #fff;
    --pass-bg: #e8ffe8;
    --pass-border: #00b300;
    --fail-bg: #ffe8e8;
    --fail-border: #cc0000;
  }

  .dark {
    --highlight-border: #ff5757;
    --highlight-bg: #3b1f1f;
    --bg: #353f40;
    --text: #e6e6e6;
    --box-bg: #2a2a2a;
    --pass-bg: #1f3b1f;
    --pass-border: #00ff76;
    --fail-bg: #3b1f1f;
    --fail-border: #ff5757;
  }

  #container {
    max-width: 900px;
    width: 90%;
    padding: 20px;
  }

  h1 { text-align: center; margin-bottom: 20px; }

  .quiz-section {
    margin-bottom: 20px;
    border: 2px solid #0078d4;
    border-radius: 10px;
    padding: 15px;
    background: var(--box-bg);
  }

  .quiz-section h2 {
    text-align: center;
    color: #0078d4;
    margin-top: 0;
  }

  .extra-section { border-color: #00a000 !important; }
  .extra-section h2 { color: #00a000 !important; }

  .question { margin-bottom: 15px; padding: 8px; border-radius: 5px; }

  .btn {
    padding: 12px 25px;
    border: none;
    border-radius: 8px;
    background: #0078d4;
    color: white;
    cursor: pointer;
    margin-top: 10px;
    font-weight: bold;
    font-size: 1em;
  }
  .btn:hover { background: #005fa3; }

  #modeToggle {
    position: absolute;
    right: 20px;
    top: 20px;
    padding: 6px 12px;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    background: #888;
    color: #fff;
  }

  input[type="text"], input[type="password"], select {
    padding: 10px;
    border-radius: 5px;
    border: 1px solid #ccc;
    width: 220px;
    background: var(--box-bg);
    color: var(--text);
  }

  #login { text-align: center; margin-bottom: 20px; }

  .hidden { display: none; }

  #resultBox {
    border-radius: 12px;
    padding: 20px;
    margin-top: 20px;
    font-size: 1.1em;
    line-height: 1.6em;
    animation: fadeIn 0.6s ease-out;
  }

  .result-pass { background: var(--pass-bg); border-left: 6px solid var(--pass-border); }
  .result-fail { background: var(--fail-bg); border-left: 6px solid var(--fail-border); }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to   { opacity: 1; transform: translateY(0); }
  }
</style>
</head>

<body>
<button id="modeToggle" onclick="toggleMode()">üåû / üåô</button>

<div id="container">
  <h1>Security-Test</h1>

  <div id="login">
    <label>Select quiz package:</label><br>
    <select id="quizSelect">
      <option value="auto">Automatically (randomly)</option>
      <option value="0">Quiz package 1</option>
      <option value="1">Quiz package 2</option>
      <option value="2">Quiz package 3</option>
    </select>
    <br><br>
    <label>Access Password:</label><br>
    <input type="password" id="quizPassword" placeholder="Enter password">
    <br>
    <button class="btn" onclick="startQuiz()">Go!</button>
  </div>

  <div id="rules" class="quiz-section">
    <h2>Rules</h2>
    <div style="text-align: center;">
      <p><strong>1. Each question can only be answered with one option.</strong></p>
      <p><strong>2. When finished, report to your supervisor.</strong></p>
      <p><strong>3. Photos or cell phone use is prohibited.</strong></p>
      <p><strong>4. Talking to others during the test is forbidden.</strong></p>
      <p><strong>5. Answer all questions to complete.</strong></p>
      <p><em>Stand: 20.01.2026</em></p>
    </div>
  </div>

  <div id="quiz" class="hidden"></div>

  <div id="finalStep" class="hidden quiz-section" style="text-align: center;">
    <h2>Final Step</h2>
    <p>Please enter the <strong>Confirmation Password</strong> to submit your test:</p>
    <input type="password" id="finalPassword" placeholder="Confirmation Password">
    <br><br>
    <button class="btn" onclick="submitQuiz()">Submit Test</button>
  </div>

  <div id="resultPage" class="hidden">
    <div id="result"></div>
    <h4>Wrong answered questions:</h4>
    <ul id="wrongList"></ul>
    <button class="btn" onclick="location.reload()">Back to Start</button>
  </div>
</div>

<button id="devDownload" class="btn" style="position: fixed; bottom: 20px; right: 20px; font-size: 0.9em;" onclick="downloadXML()">üì• XML Export</button>

<script>
/* --------------------------------------------------------
   EINSTELLUNGEN (PASSW√ñRTER HIER √ÑNDERN)
-------------------------------------------------------- */
const ACCESS_PASSWORD = "0003"; 
const SUBMIT_PASSWORD = "6677"; 

/* --------------------------------------------------------
   QUIZ DATEN
-------------------------------------------------------- */
const quizPackages = [
  {
    name: "Quiz-Paket 1",
    general: [
      { q: "When guarding the booth during a party or event, what behavior is prohibited?", options: ["Talking to guests.", "Drinking alcohol.", "Smiling and engaging with guests."], correct: 1, points: 2 },
      { q: "What should you do if you are unable to attend your shift due to illness?", options: ["Inform the security office at least 6 hours before your shift.", "Ask a colleague to cover for you without informing anyone.", "Contact the customer operator directly and let them know."], correct: 0, points: 2 },
      { q: "What must you do if you notice any unusual changes and/or irregularities at your booth during your shift?", options: ["Ignore it and continue observing.", "Report it immediately to an controlleur and/or the security office.", "Take a picture of the changes and send it to the customer."], correct: 1, points: 2 },
      { q: "What must you do if you're late for your shift?.", options: ["Contact the security office and explain the delay", "Report to the customer as soon as you arrive.", "Wait outside the booth until the customer notices."], correct: 0, points: 2 },
      { q: "What clothes do I have to wear during my duty?", options: ["I can wear whatever I want, as long as it's comfortable.", "I must wear the prescribed security guard vest, with the black trousers, at all times.", "I can wear my own clothes as long as they‚Äôre black without the security guard vest."], correct: 1, points: 2 },
      { q: "What should you do if an authorized person (manager or customer) asks you to leave your post temporarily for a task, but you have not received confirmation from the security office?", options: ["Follow the instruction, as authorized personnel are always right.", "Politely explain that you must first call the security office for clearance before leaving your assigned post.", "Leave the post, but immediately call the security office once you are performing the new task."], correct: 1, points: 2 },
      { q: "Can you leave your position at the booth without being relieved by someone else?", options: ["Yes, you can leave anytime if there is no one around.", "No, you may only leave after informing the security office and sending pictures via email.", "Yes, but you must only notify the customer before leaving."], correct: 1, points: 2 },
      { q: "When can you use a laptop while on duty?", options: ["You can use them freely at any time.", "During the night shift (12:00 a.m. - 6:00 a.m.), as long as it doesn't interfere with your duties.", "Only during breaks."], correct: 1, points: 2 },
      { q: "What should you do if you notice a problem with your assigned booth‚Äôs visibility or safety?", options: ["Immediately leave the booth and report the issue.", "Call the security office or inform the controlleur if he is nearby.", "Wait and see if the problem resolves itself."], correct: 1, points: 2 },
      { q: "Can you exchange shifts or booths with another security guard?", options: ["Yes, if both agree.", "No, only the security office can make changes.", "Yes, but only with the approval of the customer."], correct: 1, points: 2 }
    ],
    extra: [
      { q: "How should I behave at a booth party if a fight breaks out?", options: ["I first try to contact the security office, and if no one is available I call the OSC, and ultimately the trade fair police, as I do not intervene myself because I am not a security officer in the legal sense and therefore have no sovereign authority.", "I ask the customer to do something about it.", "I do not intervene because this is not my responsibility."], correct: 0, points: 5 },
      { q: "What should I do if the stand guard worker doesn‚Äôt arrive on time for their shift?", options: ["I wait for 15 minutes and then contact the security office to report the delay and ask for further instructions.", "I leave immediately because there is no one else available to cover.", "I wait for 15 minutes and leave without informing"], correct: 0, points: 5 },
      { q: "What color should my work trousers be?", options: ["Grey, as per the dress code for the security guards.", "Black, as this is the security guard color for work trousers in your role.", "It does not matter, but it is best to follow the security guard color for uniform consistency."], correct: 1, points: 5 },
      { q: "Am I allowed to work without my security guard vest?", options: ["Yes, but only if it's not required by the event or venue's safety regulations.", "No, wearing the vest is mandatory for your shift at all times.", "In an emergency, you may use the vest of a colleague, but this should only be a temporary solution."], correct: 1, points: 5 },
      { q: "When do I need to bring back my documentation papers?", options: ["There is no deadline for submitting stand documentation.", "After your last day of work, as noted on your duty schedule, to keep accurate records. However, I can also return it voluntarily after each shift.", "On the last day of the month, as per the security guard procedure for submitting documents."], correct: 1, points: 5 }
    ]
  },
  {
    name: "Quiz-Paket 2",
    general: [
      { q: "You are scheduled to work today, and your stand documentation lists the following location: 012/A80. Which hall should you report to for work?", options: ["If the first digit is ‚Äú0‚Äù (meaningless), then the second digit is the hall number and the third digit is the floor number, i.e., Hall 1.2.", "The first digit is meaningless and the remaining two digits mean: Hall 12.. So, I need to guess the floor.", "It's Hall 0 on the 12th floor."], correct: 0, points: 2 },
      { q: "When should I arrive at the booth?", options: ["10 minutes before the time stated on my duty schedule.", "20 minutes before the time stated on my duty schedule.", "Exactly the time that's on my duty schedule."], correct: 2, points: 2 },
      { q: "How should the handover to the next employee be carried out properly?", options: ["There are three other employees who are coming to the same booth and will replace me, so I can hand over the booth to any of them.", "I hand it over to the person who is also named as the ‚Äúnext in line‚Äù on my stand documentation. If there is a mistake, I call the office.", "If I don't have time, I'll have someone else sign it and end my shift."], correct: 1, points: 2 },
      { q: "Who is allowed to take products from the booth?", options: ["Anyone who wants something.", "Only people with a collection slip and proof of identity.", "Company friends are always allowed to take something."], correct: 1, points: 2 },
      { q: "Who, apart from me, is allowed to be at the booth?", options: ["Only authorized persons, in particular company guests and customers.", "Authorized persons, in particular company guests and customers, but also my other colleagues who do not work at the booth.", "All authorized persons, in particular company guests and customers, my other colleagues who do not work at the booth, and private friends. "], correct: 0, points: 2 },
      { q: "Who is an controller?", options: ["It is someone who is responsible for the booth builders.", "It is a person in authority whose instructions I must follow. The person in authority also checks that everything is in order at the booth. If I have any questions, I can also contact the person in authority.", "controllers are not persons with authority to give instructions, so I do not have to follow their instructions."], correct: 1, points: 2 },
      { q: "Can I take items home with me from the exhibition grounds?", options: ["Yes, if they are inconspicuous items that no one will miss.", "No one is allowed to take items that do not belong to them.", "Yes, if the customer expressly allows me to do so."], correct: 1, points: 2 },
      { q: "What happens if the stand documentation is not filled out correctly?", options: ["Filling it out incorrectly will not lead to any difficulties because it is not that important.", "If I fill it out incorrectly, I may receive a warning, which is not good for my reputation. It could also be that my wage payment is incorrect due to incorrect time entries.", "If this only happens occasionally, it should not be a significant problem."], correct: 1, points: 2 },
      { q: "Am I permitted to use items from the booth?", options: ["I can use items that do not belong to me from the booth without any issues, provided that I return them to their original location.", "The use of items that do not belong to me from the booth is strictly prohibited, with no exceptions.", "I will ask the customer in advance if this is acceptable to them."], correct: 1, points: 2 },
      { q: "If a dispute breaks out between the security workers, what should I do?", options: ["I get involved in the dispute because it also affects me.", "I just try to mediate; the office doesn't need to know about it.", "I try to mediate as long as I don't put myself in danger, but I definitely notify the office."], correct: 2, points: 2 }
    ],
    extra: [
      { q: "How should I handle my stand documentation and then hand it in?", options: ["I should treat my stand documentation like a university transcript because it is a document. I should avoid stains, creases, or other damage. Above all, I should not fold the documentation.", "The stand documentation should only contain the correct information; everything else is not so important.", "I should treat my stand documentation like a university transcript because it is stand documentation. However, I can still lick, crease, or fold it."], correct: 0, points: 5 },
      { q: "What should I do if I am on duty during a set-up or dismantling period (crash night)?", options: ["I arrive early to overcome any potential difficulties caused by missing labels and obstacles in good time.", "I don't worry about it because I assume that nothing unusual will happen.", "If I start my shift late, I don't see it as my responsibility."], correct: 0, points: 5 },
      { q: "Who do I hold responsible if a train company is regularly late and I am therefore late?", options: ["I do not take responsibility, as the train company is responsible for the delays.", "I am responsible if the train company is late, as I can take this into account and act in advance. That's why I choose an earlier train so that I can start work on time.", "The company must accept that delays are a frequent occurrence. I consider them an excuse for my tardiness."], correct: 1, points: 5 },
      { q: "What rule applies to the obligation to carry identification while at work?", options: ["I only have to carry identification with me if a check has been announced.", "I must carry my identification with me throughout my entire working hours and present it on request.", "I only need to bring my identification with me on my first day of work. "], correct: 1, points: 5 },
      { q: "Can I go to the toilet without notification during my shift?", options: ["Yes, that is a fundamental right. I can leave the booth unattended for as long as I want.", "No, but I have to notify the office or, if an controller is currently on duty, let them know. This is necessary so that someone else can monitor my booth in my absence.", "I can leave the booth without any problems, even if I don't want to go to the toilet."], correct: 1, points: 5 }
    ]
  },
  {
    name: "Quiz-Paket 3",
    general: [
      { q: "When should you report a technical malfunction of a device at the booth to the security office?", options: ["Report it immediately to the security office.", "That's not my concern.", "As long as it's not on fire, it's none of my concern."], correct: 0, points: 2 },
      { q: "How should you deal with unauthorized persons entering the booth during your night shift?", options: ["Politely ask them to leave and report the incident to the security office.", "Allow them to stay and offer them something to eat from the booth.", "Ignore the situation unless it becomes disruptive."], correct: 0, points: 2 },
      { q: "Can you take personal phone calls while on duty?", options: ["As long as they are quick and do not interfere with your duties.", "Even with a speaker, there's nothing wrong with it.", "Yes, but I have to leave the booth unattended. "], correct: 0, points: 2 },
      { q: "What is the best way to handle a situation where you are unsure about a rule or procedure during your shift?", options: ["Follow your instincts and do what seems right.", "Contact the security office to clarify the situation before taking action.", "Wait until someone else takes action, and follow their lead."], correct: 1, points: 2 },
      { q: "If you‚Äôre not sure about the safety protocols at the booth, what should you do?", options: ["Go ahead with the task, trusting your judgment.", "Contact the security office and ask for clarification before proceeding.", "I leave my booth to ask another security guard."], correct: 1, points: 2 },
      { q: "If a booth employee leaves their booth without permission, what do you do?", options: ["I report this behavior to the security office because it is not allowed.", "It's none of my business, so I don't report it.", "It is allowed, so there is nothing unusual about it."], correct: 0, points: 2 },
      { q: "What should you do if someone shows aggressive behavior at the booth?", options: ["I don't intervene because that's not my job.", "Calm them down yourself or keep distance and immediately notify the security office.", "Argue with them to show authority."], correct: 1, points: 2 },
      { q: "What should you do if you lose your safety vest before your shift?", options: ["I continue working without a vest.", "I immediately contact the security office to get a replacement.", "I wear a similar vest as a replacement."], correct: 1, points: 2 },
      { q: "How should you act if someone hands you a lost item?", options: ["I keep it for myself as a gift.", "I put it aside and report it to the security office.", "I refuse to accept lost items."], correct: 1, points: 2 },
      { q: "What should you do if you lose your access card before your shift?", options: ["I try to work without an access card.", "I immediately contact the security office to get a replacement.", "I don't go to work and cancel my shift for that day."], correct: 1, points: 2 }
    ],
    extra: [
      { q: "What is your responsibility if you notice a fire hazard at the booth or hall?", options: ["Wait for someone else to deal with it.", "Immediately report it to the security office and follow evacuation procedures.", "Attempt to put out the fire yourself."], correct: 1, points: 5 },
      { q: "What should you do if an event attendee is behaving suspiciously near your booth?", options: ["Watch the person closely and report the behavior to security office if necessary.", "Confront the person directly and arrest him.", "Ignore the situation."], correct: 0, points: 5 },
      { q: "What is the first step to take if a medical emergency occurs during your working hours?", options: ["Someone will help him, so I don't need to help.", "First, I try to administer first aid, then I report it to the security office.", "Leave the booth and go home immediately."], correct: 1, points: 5 },
      { q: "What should I do if I urgently need to use the restroom?", options: ["I go without telling anyone.", "I ask a stranger to watch my booth for a moment.", "I report to the security office and wait for a replacement."], correct: 2, points: 5 },
      { q: "Smoke develops at the booth or in the hall. What should I do?", options: ["There is a person in responsible who will take care of it.", "As long as it's just smoke, it's not a problem at all.", "Immediately report it to the security office."], correct: 2, points: 5 }
    ]
  }
];

let startTime, selectedPackage;

function toggleMode() { document.body.classList.toggle("dark"); }

function startQuiz() {
  const passwordInput = document.getElementById('quizPassword').value.trim();

  if (passwordInput !== ACCESS_PASSWORD) return alert("Wrong access password!");

  document.getElementById('login').classList.add('hidden');
  document.getElementById('rules').classList.add('hidden');

  const selection = document.getElementById("quizSelect").value;
  selectedPackage = (selection === "auto") 
    ? quizPackages[Math.floor(Math.random() * quizPackages.length)] 
    : quizPackages[parseInt(selection)];

  const quizDiv = document.getElementById('quiz');
  quizDiv.classList.remove('hidden');
  quizDiv.innerHTML = '';

  const allQs = [...selectedPackage.general, ...selectedPackage.extra];
  allQs.forEach((q, i) => {
    const div = document.createElement('div');
    div.className = 'quiz-section question';
    if (i >= selectedPackage.general.length) div.classList.add('extra-section');
    div.innerHTML = `<p><strong>${i+1}. ${q.q}</strong></p>` +
      q.options.map((opt, j) => `<label><input type="radio" name="q${i}" value="${j}"> ${opt}</label><br>`).join('');
    quizDiv.appendChild(div);
  });

  document.getElementById('finalStep').classList.remove('hidden');
  startTime = new Date();
  window.scrollTo(0,0);
}

function submitQuiz() {
  const finalPwInput = document.getElementById('finalPassword').value.trim();
  
  if (finalPwInput !== SUBMIT_PASSWORD) {
    return alert("Incorrect confirmation password!");
  }

  const allQuestions = [...selectedPackage.general, ...selectedPackage.extra];
  let unanswered = [];

  document.querySelectorAll(".question").forEach(q => {
    q.style.border = "";
    q.style.backgroundColor = "";
  });

  allQuestions.forEach((q, i) => {
    if (!document.querySelector(`input[name="q${i}"]:checked`)) unanswered.push(i);
  });

  if (unanswered.length > 0) {
    unanswered.forEach(i => {
      const block = document.getElementsByName(`q${i}`)[0].closest(".question");
      block.style.border = "3px solid var(--highlight-border)";
      block.style.backgroundColor = "var(--highlight-bg)";
    });
    return alert("Answer all questions first!");
  }

  const endTime = new Date();
  const totalSeconds = Math.floor((endTime - startTime)/1000);
  const duration = `${Math.floor(totalSeconds/60)} Min ${totalSeconds%60} Sek`;

  let errorPoints = 0;
  const wrong = [];

  allQuestions.forEach((q, i) => {
    const userAnswer = parseInt(document.querySelector(`input[name="q${i}"]:checked`).value);
    if (userAnswer !== q.correct) {
      errorPoints += q.points;
      wrong.push(q.q);
    }
  });

  const passed = errorPoints < 10;
  document.getElementById('quiz').classList.add('hidden');
  document.getElementById('finalStep').classList.add('hidden');
  document.getElementById('resultPage').classList.remove('hidden');

  document.getElementById('result').innerHTML = `
    <div id="resultBox" class="${passed ? "result-pass" : "result-fail"}">
      <h2>${passed ? "‚úîÔ∏è Passed" : "‚ùå Failed"}</h2>
      <p>Points: ${errorPoints} | Time: ${duration}</p>
    </div>`;

  const wrongList = document.getElementById('wrongList');
  wrongList.innerHTML = '';
  wrong.forEach(q => {
    const li = document.createElement('li');
    li.textContent = q;
    wrongList.appendChild(li);
  });

  let logs = JSON.parse(localStorage.getItem('quizProtokoll') || '[]');
  logs.push({
    fehlerpunkte: errorPoints,
    benoetigteZeit: duration,
    status: passed ? "Beboothen" : "Nicht beboothen",
    datum: new Date().toLocaleString()
  });
  localStorage.setItem('quizProtokoll', JSON.stringify(logs));
}

function downloadXML() {
  const logs = JSON.parse(localStorage.getItem('quizProtokoll') || '[]');
  let xml = `<?xml version="1.0" encoding="UTF-8"?><quizProtokoll>`;
  logs.forEach(l => {
    xml += `<eintrag><datum>${l.datum}</datum><punkte>${l.fehlerpunkte}</punkte><status>${l.status}</status></eintrag>`;
  });
  xml += `</quizProtokoll>`;
  const blob = new Blob([xml], { type: 'application/xml' });
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = 'protocol.xml';
  a.click();
}

document.addEventListener('contextmenu', e => e.preventDefault());
</script>
</body>
</html>












